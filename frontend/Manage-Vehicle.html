<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="UTF-8"/>
    <title>Manage Vehicles - RideEase</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <style>

        body {
            background-color: #f0f2f5;
            font-family: 'Segoe UI', sans-serif;
        }


        .page-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }


        .content-wrap {
            flex: 1;
            padding: 40px 20px;
        }


        .navbar-custom {
            background: linear-gradient(to right, #2c3e50, #34495e);
        }


        .navbar-custom .navbar-brand, .navbar-custom .nav-link {
            color: #fff !important;
            font-weight: 600;
        }


        .form-wrapper, .table-wrapper {
            background: #fff;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }


        .form-wrapper h2, .table-wrapper h2 {
            color: #2c3e50;
            font-weight: 700;
            margin-bottom: 20px;
        }


    </style>


</head>


<body>


<div class="page-container">


    <nav class="navbar navbar-expand-lg navbar-custom">


        <a class="navbar-brand" th:href="@{/owner/dashboard}">RideEase</a>


    </nav>


    <div class="content-wrap container">


        <div class="form-wrapper">
            <h2 th:text="${carForm.carId == null} ? 'Add a New Vehicle' : 'Update Vehicle Details'"></h2>

            <form th:action="@{/owner/save-vehicle}" th:object="${carForm}" method="post">
                <input type="hidden" th:field="*{carId}"/>

                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Car Model</label>
                        <input type="text" class="form-control" th:field="*{carModel}" />
                        <!-- NEW: This will display the error message for the carModel field -->
                        <div class="text-danger" th:if="${#fields.hasErrors('carModel')}" th:errors="*{carModel}"></div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Year</label>
                        <input type="number" class="form-control" th:field="*{year}" />
                        <!-- NEW: Error message for year -->
                        <div class="text-danger" th:if="${#fields.hasErrors('year')}" th:errors="*{year}"></div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Color</label>
                        <input type="text" class="form-control" th:field="*{color}" />
                        <!-- NEW: Error message for color -->
                        <div class="text-danger" th:if="${#fields.hasErrors('color')}" th:errors="*{color}"></div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Price (per day)</label>
                        <input type="number" class="form-control" th:field="*{price}" step="0.01" />
                        <!-- NEW: Error message for price -->
                        <div class="text-danger" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></div>
                    </div>
                    <div class="col-md-12">
                        <label class="form-label">Status</label>
                        <select class="form-select" th:field="*{status}">
                            <option value="Available">Available</option>
                            <option value="Under Maintenance">Under Maintenance</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary w-100" style="background-color: #2c3e50; border:none;"
                                th:text="${carForm.carId == null} ? 'Add Vehicle' : 'Update Vehicle'">
                        </button>
                    </div>
                </div>
            </form>
        </div>


        <form th:object="${carForm}"


              th:action="@{/owner/save-vehicle}"


              method="post">


            <input type="hidden" name="_method" value="put" th:if="${carForm.carId != null}"/>


            <input type="hidden" th:field="*{carId}"/>


            ...


        </form>


        <div class="table-wrapper">


            <h2>Your Current Vehicles</h2>


            <div th:if="${param.added}" class="alert alert-success">Vehicle successfully added!</div>


            <div th:if="${param.updated}" class="alert alert-info">Vehicle successfully updated!</div>





            <div class="table-responsive">


                <table class="table table-hover align-middle">


                    <thead>


                    <tr>


                        <th>Car Model</th>


                        <th>Year</th>


                        <th>Color</th>


                        <th>Price</th>


                        <th>Status</th>


                        <th class="text-center">Actions</th>


                    </tr>


                    </thead>


                    <tbody>


                    <tr th:each="car : ${cars}">


                        <td th:text="${car.carModel}"></td>


                        <td th:text="${car.year}"></td>


                        <td th:text="${car.color}"></td>


                        <td th:text="${ #numbers.formatDecimal(car.price, 1, 'COMMA', 2, 'POINT')}"></td>


                        <td><span th:text="${car.status}"
                                  th:classappend="${car.status == 'Available'} ? 'badge bg-success' : 'badge bg-warning text-dark'"></span>
                        </td>


                        <td class="text-center">


                            <a th:href="@{/owner/edit-vehicle/{id}(id=${car.carId})}"
                               class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil-square"></i> Edit</a>





                        </td>


                    </tr>


                    </tbody>


                </table>


            </div>


        </div>


    </div>


</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


</body>
</html>

